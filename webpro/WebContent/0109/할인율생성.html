<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<style>
#result1, #result2{
	display: flex;
	flex-direction: row;
	
	width: 70%;
	height: 200px;
	background : gray;
}
.result div{
	flex: 25%;
	height: 80%;
	background : lightgray;
}
img{
	width: 95%;
	height: 60%;
	border: 2px dotted green;
}
.box div{
	border: 1px dotted orange;
	padding: 10px;
	margin: 10px;
}

</style>
</head>
<body>



<div class="box">
<h4>각 이미지의 onclick 이벤트 설정</h4>
<br><br>
<div id="result1" class="result">
	<div><img onclick="sales(this)" src="../images/곰돌이 등.JPG" src="곰돌이 등.JPG"></div>
	<div><img onclick="sales(this)" src="../images/닭갈비.JPG" src="닭갈비.JPG"></div>
	<div><img onclick="sales(this)" src="../images/사자.jpg" src="사자.jpg"></div>
	<div><img onclick="sales(this)" src="../images/손말이 고기.JPG" src="손말이 고기.JPG"></div>
</div>
</div>


<div class="box">
<h4>js에서 이벤트 일괄등록 처리<br>
addEventListener</h4>
<br><br>
<div id="result2" class="result">
	<div><img src="../images/곰돌이 등.JPG" src="곰돌이 등.JPG"></div>
	<div><img src="../images/닭갈비.JPG" src="닭갈비.JPG"></div>
	<div><img src="../images/사자.jpg" src="사자.jpg"></div>
	<div><img src="../images/손말이 고기.JPG" src="손말이 고기.JPG"></div>
</div>
</div>

<script type="text/javascript">
vimg = document.querySelectorAll('#result2 img');

// 클릭 이벤트를 등록
for (var i = 0; i < vimg.length; i++) {
    vimg[i].addEventListener('click', imgSales);
}

// imgSales 함수 정의
function imgSales() {
    // 이미 생성되어있는 ptag를 삭제. 맨 최초 실행시 ptag가 없으면 에러가 남
    // if문 비교
    if (vptag != null) {
        vptag.remove();
    }

    // 랜덤 발생 5~15% 사이로
     rand = Math.floor(Math.random() * 11 + 5);

    // ptag 생성
     vptag = document.createElement('p');

    // 13% 문자열을 생성. textNode 생성
     tnode = document.createTextNode(rand.toString() + "%");

    // p 태그에 문자열 textNode를 추가
    vptag.appendChild(tnode);

    // 클릭한 this의 부모를 검색 - parentNode
    let imgParent = this.parentNode;

    imgParent.appendChild(vptag);

    // 더 이상 클릭 이벤트가 발생하지 않도록 이벤트 제거
    this.removeEventListener('click', imgSales);
}


vptag = null;
sales = (pimg) =>{
	//이미 생성되어있는 ptag를 삭제 맨 최초 실행시 ptag가 없으면 에러가 남
	//if문 비교
	if(vptag !=null) vptag.remove();
	
	//랜덤발생 5~15% 사이로 
	rand = Math.floor(Math.random()*11+5);
	
	//ptag생성
	vptag = document.createElement('p');
	
	//13% 문자열을 생성 textNode 생성
	tnode = document.createTextNode(rand.toString() + "%");
	
	//p태그에 문자열 textNode를 추가
	vptag.appendChild(tnode);
	
	//클릭한 this의 부모를 검색 - parentNode
	imgParent = pimg.parentNode;
	
	imgParent.appendChild(vptag);

}
</script>

</body>
</html>



















