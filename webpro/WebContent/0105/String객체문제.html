<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<script type="text/javascript">

proc1 = () =>{
	//입력
	input = prompt("주민번호 입력","000000-0000000");
	//추출
	yy = input.substr(0,2);
	mm = input.substr(2,2);
	dd = input.substr(4,2);
	gend = input.substr(7,1);
	console.log(gend);
	
	//비교 - 성별, 1900/2000인지 비교
	if(gend == "1" || gend == "3"){
		gender = "남자";	
	}else if(gend == "2" || gend == "4"){
		gender = "여자";
	}
	
	if(gend == "1" || gend == "2"){
		year = 1900;
	}else if(gend == "3" || gend == "4"){
		year = 2000;
	}
	today = new Date();
	today.getFullYear();
	
	age = today.getFullYear() - (year + parseInt(yy));
	
	code = input.substr(0,8);
	//출력내용
	str = `주민번호 : ${code}******* <br> `;
	str += `생일 : ${year + parseInt(yy)}년 ${mm}월 ${dd}일 <br>`;
	str += `성별 : ${gender}`;
	str += `나이 : ${age}`;
	
	document.getElementById('result1').innerHTML = str;
}

proc2 = () =>{
	multi = "234567892345";
	sum = 0;
	// 입력
	input = prompt("주민번호 입력","931215-1424685");
	
	// -을  ""로 변경
	reinput = input.replace("-","");
	
	for (var i = 0; i < multi.length; i++) {
	//	multi[i] * reinput[i];
		sum += multi.substr(i,1)* reinput.substr(i,1);
		
	}
	
	vsum = 11 - sum % 11;
	
	if(vsum == 10) vsum = 0;
	if(vsum == 11) vsum = 1;
	
	//이런 방법도 있다.
	vsum = vsum % 10;
	renum = reinput.substr(reinput.length -1,1);
 	if(vsum == renum){
 		str = "진짜번호";
 	}else{ 
 		str = "가짜번호";
 	}
 	
 	//출력내용
 	res = `주민번호 : ${input.slice(0,8)}******* <br> `;
 	res += `${str}`;
 	document.getElementById('result1').innerHTML = res;
	
}
</script>
</head>
<body>

<div class="box">
<h4>prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를
출력하는 프로그램을 작성하시오</h4>
<input type="button" value="확인" onclick="proc1()">
<br><br>
<div id="result1"></div>
</div>

<div class="box">
<h4>주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는
프로그램을 작성하시오.(ABCDEF-GHIJKLM)
</h4>
<input type="button" value="확인" onclick="proc2()">
<br><br>
<div id="result2"></div>
</div>

</body>
</html>